<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Borrow/Return System</title>
    
    <!-- Link to external CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <!-- Google Fonts (Optional) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Navbar -->
    <%- include('particals/header') %>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Welcome to the Library</h1>
            <p>Borrow and return books easily with our system</p>
            <form class="search-form" action="/home/search" method="POST">
                <input type="text" name="query" placeholder="Search for books by title, author...">
                <button type="button" id="start-record-btn">üé§</button> <!-- N√∫t micro -->
                <button type="submit">Search</button>
            </form>
        </div>
    </section>

    <%- include('particals/topic_list') %>

    <!-- Book List Section -->
    <%- include('particals/book_list') %>

    <!-- Footer Section -->
    <%- include('particals/footer') %>
</body>
<script>
    // Ki·ªÉm tra xem tr√¨nh duy·ªát c√≥ h·ªó tr·ª£ Web Speech API kh√¥ng
    if ('webkitSpeechRecognition' in window) {
        const recognition = new webkitSpeechRecognition();
        const searchInput = document.getElementById('search-input');
        const startRecordBtn = document.getElementById('start-record-btn');

        // Thi·∫øt l·∫≠p ng√¥n ng·ªØ cho nh·∫≠n di·ªán gi·ªçng n√≥i
        recognition.lang = 'vi-VN'; // Thay ƒë·ªïi ng√¥n ng·ªØ n·∫øu c·∫ßn
        recognition.interimResults = false; // Kh√¥ng tr·∫£ v·ªÅ k·∫øt qu·∫£ t·∫°m th·ªùi

        // B·∫Øt ƒë·∫ßu nh·∫≠n di·ªán gi·ªçng n√≥i
        startRecordBtn.onclick = function() {
            recognition.start();
        };

        // X·ª≠ l√Ω khi nh·∫≠n di·ªán th√†nh c√¥ng
        recognition.onresult = function(event) {
            const transcript = event.results[0][0].transcript; // L·∫•y chu·ªói ƒë√£ nh·∫≠n di·ªán
            searchInput.value = transcript; // ƒê·∫∑t gi√° tr·ªã v√†o √¥ t√¨m ki·∫øm
        };

        // X·ª≠ l√Ω khi c√≥ l·ªói x·∫£y ra
        recognition.onerror = function(event) {
            console.error('Error occurred in recognition: ' + event.error);
        };
    } else {
        console.log('Web Speech API is not supported in this browser.');
    }
    // H√†m s·∫Ω ch·∫°y khi ng∆∞·ªùi d√πng nh·∫•n n√∫t
    function confirmBorrow() {
        const userName = "<%= user_name ? user_name : '' %>";
        
        if (userName) {
            alert(`Congratulation !!! ${userName} has been borrow this book sucess.`);
            // Th·ª±c hi·ªán h√†nh ƒë·ªông khi user_name t·ªìn t·∫°i
        } else {
            alert("Please login your account before borrow book !!!");
            // X·ª≠ l√Ω khi user_name kh√¥ng t·ªìn t·∫°i
        }

    }
</script>
</html>
